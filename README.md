# TiOKawa

## 概要

TiOKawaは、「ちおかわ」キャラクターを主人公とした**ラストウォーライク**なカジュアルゲームです。プレイヤーは複数の「ちおかわ」を操作して、コース上のギミックを利用しながら敵を倒してゴールを目指します。

### ゲームの特徴
- **シンプルな操作**: ちおかわの左右移動のみ
- **戦略的なゲームプレイ**: ゲートを通って仲間を増やし、敵との戦いに備える
- **カジュアルな体験**: 手軽に楽しめるゲームプレイ
- **ちおかわの魅力**: 愛らしいキャラクターによる癒し系アクション

### ゲームプレイ
- **移動**: ちおかわを左右に移動させてコースを進む
- **戦闘**: ちおかわが敵に体当たりしてダメージを与える（1体につき1ダメージ）
- **ギミック活用**: 
  - **ゲート**: 「+2」「×3」「-10」などで仲間の数を調整
  - **障害物**: 木箱などの障害物を避ける（当たると死亡）
  - **敵**: モブ敵やボス敵を倒してゴールを目指す

### 技術的特徴
本プロジェクトは、保守性と拡張性を重視したMVP（Model-View-Presenter）アーキテクチャで構築されています：
- **MVP アーキテクチャ**: 明確な関心の分離による構造化された開発
- **UniRx統合**: リアクティブプログラミングによる効率的なイベント処理
- **UniTask**: 非同期処理のサポート
- **スキャフォールディングツール**: 迅速な開発環境セットアップ

## アーキテクチャ

TiOKawaゲームは、MVP（Model-View-Presenter）アーキテクチャパターンを採用して開発されています。これにより、コードの保守性と拡張性を確保し、チーム開発を効率化しています。

### ゲーム開発におけるMVPの利点
- **明確な責任分離**: ゲームロジック、UI、制御部分が独立して開発可能
- **テストしやすい構造**: ビジネスロジックの単体テストが容易
- **機能追加の簡素化**: 新しいシーンや機能の追加が構造化されて行える
- **チーム開発の効率化**: 各レイヤーを並行して開発可能

### コアコンポーネント

- **Model**: ゲームの状態管理とビジネスロジック（バトル処理、プレイヤーステータス、敵AIなど）
- **View**: ユーザーインタラクション（タッチ操作、UI表示）とゲーム画面の描画
- **Presenter**: ModelとViewを接続し、ゲームフローと操作応答を管理

### プロジェクト構造

```
Assets/TiOKawa/
├── Editor/
│   └── SceneScaffold.cs        # スキャフォールディング用Editorツール
├── Scripts/
│   ├── Model/                  # ゲームロジック層（バトル、プレイヤー、敵のモデル）
│   ├── Presenter/              # 制御層（シーン間の制御、ゲームフロー管理）
│   │   └── MonoPresenter.cs
│   ├── View/                   # UI・表示層（ゲーム画面、メニューUI）
│   │   ├── MonoView.cs
│   │   ├── ButtonBase.cs
│   │   └── SimpleButton.cs
│   └── Repository/             # データアクセス層（ゲームデータベース）
├── Scenes/                     # ゲームシーン
│   ├── Battle/                 # バトルシーン（メインゲームプレイ）
│   ├── Title/                  # タイトル画面
│   ├── Result/                 # リザルト画面
│   ├── Settings/               # 設定画面
│   └── SelectStage/            # ステージ選択画面
├── Prefabs/                    # ゲームオブジェクト（ちおかわ、敵、ギミック）
├── Audio/                      # BGM・効果音
├── Images/                     # ゲーム用画像素材
└── Textures/                   # テクスチャ素材
```

## 現在の実装状況

### 実装済み機能
- ✅ **タイトル画面**: ゲーム開始とメニューナビゲーション
- ✅ **バトルシステム**: 基本的なゲームプレイループ
  - ちおかわの左右移動制御
  - 敵のスポーンとバトル処理
  - ウェーブベースの敵出現システム
  - ゲート通過による仲間増減システム
- ✅ **リザルト画面**: ゲーム結果の表示
- ✅ **BGM・効果音システム**: ゲーム音響の実装
- ✅ **設定画面**: 音量調整などの基本設定
- ✅ **ステージ選択**: 複数ステージへの対応

### 開発中・予定機能
- 🔄 ボス戦システムの拡張
- 🔄 追加ギミックの実装
- 🔄 ステージデザインの拡充
- 🔄 ゲームバランスの調整

### 技術スタック・依存関係

- **Unity 2022.3 LTS**: ゲームエンジン
- **UniRx**: リアクティブプログラミングとイベント処理（UI操作、ゲームイベントの管理）
- **UniTask**: 非同期処理サポート（シーン遷移、アニメーション、ローディング処理）
- **MasterMemory**: ゲームデータ管理（敵データ、ウェーブ設定、バランス調整用データ）
- **MessagePack**: 高速データシリアライゼーション

### 主要クラス

- `MonoView`: すべてのViewコンポーネントの抽象基底クラス。ゲームUI初期化ライフサイクルを提供
- `MonoPresenter`: Model、View、サブスクリプションのセットアップフックを持つPresenterコンポーネントの抽象基底クラス
- `BattleScenePresenter`: バトルシーンのメイン制御クラス（ゲームプレイループ、敵スポーン管理）
- `ButtonBase`: イベント処理にUniRxを使用するリアクティブボタンの実装
- `SceneScaffold`: 新しいシーンのMVPフォルダ構造とアセンブリ参照の自動生成を行うUnity Editorツール

## 開発・ビルド

### 必要な環境
- Unity 2022.3 LTS 以上
- UniRx パッケージ
- UniTask パッケージ

### セットアップ
1. Unityでプロジェクトを開く
2. Package Managerから必要なパッケージをインストール
3. `Assets/TiOKawa/Scenes/Title.unity`を開いてゲームを実行

## Contributors

- **kuto** - プロジェクト作成者およびメイン開発者
- **YuTakane256** - BGM機能の実装
- **tytdroid** - タイトル画面の実装
- **copilot-swe-agent[bot]** - 自動化による貢献
